
<br><br>
<h1>Administrative View: Members</h1>
<h2>Current Members</h2>

<div *ngFor="let mem of members;let i = index;">
    <input type="text"
            [(ngModel)]="members[i].MemberID"
            class="form-control"
            #MemberID="ngModel"
            [ngClass]="{ 'is-invalid': MemberID.touched && MemberID.invalid }"
            disabled>
     <input type="text"
            [(ngModel)]="members[i].FirstName"
            class="form-control"
            #FirstName="ngModel"
            [ngClass]="{ 'is-invalid': FirstName.touched && FirstName.invalid }">
      <input type="text"
            [(ngModel)]="members[i].LastName"
            class="form-control"
            #LastName="ngModel"
            [ngClass]="{ 'is-invalid': LastName.touched && LastName.invalid }">
      <input type="text"
            [(ngModel)]="members[i].SecondaryHouseholdMemberName"
            class="form-control"
            #SecondaryHouseholdMemberName="ngModel">
      <input type="text"
            [(ngModel)]="members[i].LastPaidDate"
            class="form-control"
            #LastPaidDate="ngModel">
      <input type="text"
            [(ngModel)]="members[i].DateJoined"
            class="form-control"
            #DateJoined="ngModel">
      <input type="text"
            [(ngModel)]="members[i].MembershipType"
            class="form-control"
            #MembershipType="ngModel">
      <input type="text"
            [(ngModel)]="members[i].Active"
            class="form-control"
            #Active="ngModel">
      <input type="text"
            [(ngModel)]="members[i].Email"
            class="form-control"
            #Email="ngModel">
      <input type="text"
            [(ngModel)]="members[i].PreferredPhone"
            class="form-control"
            #PreferredPhone="ngModel">
      <input type="text"
            [(ngModel)]="members[i].SecondaryPhone"
            class="form-control"
            #SecondaryPhone="ngModel">
      <input type="text"
            [(ngModel)]="members[i].StreetAddress"
            class="form-control"
            #StreetAddress="ngModel">
      <input type="text"
            [(ngModel)]="members[i].City"
            class="form-control"
            #City="ngModel">
      <input type="text"
            [(ngModel)]="members[i].State"
            class="form-control"
            #State="ngModel">
      <input type="text"
            [(ngModel)]="members[i].ZipCode"
            class="form-control"
            #ZipCode="ngModel">

   <input type="button" value = "Delete" color='primary' (click)='deleteMember(members[i].MemberID)'>
   <input type="button" value = "Update" color='primary' (click)='updateMember(members[i].MemberID, members[i].FirstName, members[i].LastName)'>
<br><br>
</div>

<div id="theForm">
   <h2>Add New Member</h2>
   <form #f="ngForm" name="theForm" (submit)="addMember(f)">
     <div class="form-group">
       <label>First Name*</label>
       <input type="text"
             class="form-control"
             name="FirstName"
             [(ngModel)]="member.FirstName"
             #memberModel="ngModel"
             required
             pattern="^[a-zA-Z]+$">
       <span class="help-block danger" *ngIf="memberModel.errors?.required && memberModel.touched">
         The first name is required
       </span>
       <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
         The first name can only contain the letters a-z or A-Z
       </span>
     </div>
 
     <div class="form-group">
      <label>Last Name*</label>
      <input type="text"
            class="form-control"
            name="LastName"
            [(ngModel)]="member.LastName"
            #memberModel="ngModel"
            required
            pattern="^[a-zA-Z]+$">
      <span class="help-block danger" *ngIf="memberModel.errors?.required && memberModel.touched">
        The last name is required
      </span>
      <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
        The last name can only contain the letters a-z or A-Z
      </span>
     </div>
 
     <div class="form-group">
        <label>Secondary Household Member Name</label>
        <input type="text"
              class="form-control"
              name="SecondaryHouseholdMemberName"
              [(ngModel)]="member.SecondaryHouseholdMemberName"
              #memberModel="ngModel"
              pattern="^[a-zA-Z]+$">
        <span class="help-block danger" *ngIf="memberModel.errors?.pattern">
          The Secondary Household Member Name can only contain the letters a-z or A-Z
        </span>
       </div>

       <div class="form-group">
        <label>Last Paid Date</label>
        <input type="text"
              class="form-control"
              name="LastPaidDate"
              [(ngModel)]="member.LastPaidDate"
              #memberModel="ngModel"
              pattern="">
              <!-- pattern? -->
       </div>

       <div class="form-group">
        <label>Date Joined</label>
        <input type="text"
              class="form-control"
              name="DateJoined"
              [(ngModel)]="member.DateJoined"
              #memberModel="ngModel"
              pattern="">
              <!-- pattern? -->
       </div>
       <div class="form-group">
            <label>Membership Type</label>
            <input type="text"
                  class="form-control"
                  name="MembershipType"
                  [(ngModel)]="member.MembershipType"
                  #memberModel="ngModel"
                  pattern="">
                  <!-- pattern? -->
           </div>

       <div class="form-group">
        <label>Active</label>
        <input type="checkbox"
              class="form-control"
              name="Active"
              [(ngModel)]="member.Active"
              #memberModel="ngModel">
       </div>

       <div class="form-group">
        <label>Email</label>
        <input type="text"
              class="form-control"
              name="Email"
              [(ngModel)]="member.Email"
              #memberModel="ngModel"
              pattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$">
        <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
            Please enter a valid email address. Ex: "janedoe@email.com"
        </span>
       </div>

       <div class="form-group">
        <label>Preferred Phone</label>
        <input type="text"
              class="form-control"
              name="PreferredPhone"
              [(ngModel)]="member.PreferredPhone"
              #memberModel="ngModel"
              pattern="^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$">
        <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
            Please enter a valid phone number. Ex: "(123) 456-7890"
        </span>
       </div>

       <div class="form-group">
        <label>Secondary Phone</label>
        <input type="text"
              class="form-control"
              name="SecondaryPhone"
              [(ngModel)]="member.SecondaryPhone"
              #memberModel="ngModel"
              pattern="^\s*(?:\+?(\d{1,3}))?[-. (]*(\d{3})[-. )]*(\d{3})[-. ]*(\d{4})(?: *x(\d+))?\s*$">
              <!-- test pattern -->
        <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
            Please enter a valid phone number. Ex: "(123) 456-7890"
        </span>
       </div> 

       <div class="form-group">
        <label>Street Address</label>
        <input type="text"
              class="form-control"
              name="StreetAddress"
              [(ngModel)]="member.StreetAddress"
              #memberModel="ngModel"
              pattern="^[#.0-9a-zA-Z\s,-]+$">
              <!-- test pattern -->
        <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
            Street Address can only contain the characters ".", 0-9, a-z and A-Z. Ex: "10 S. Main St."
        </span>
       </div> 

       <div class="form-group">
        <label>City</label>
        <input type="text"
              class="form-control"
              name="City"
              [(ngModel)]="member.City"
              #memberModel="ngModel"
              pattern="">
              <!-- test pattern ^[a-zA-Z]+$ -->
        <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
            The City name can only contain the letters a-z or A-Z.
        </span>
        </div>

        <div class="form-group">
            <label>State</label>
            <input type="text"
                  class="form-control"
                  name="State"
                  [(ngModel)]="member.State"
                  #memberModel="ngModel"
                  pattern="">
                  <!-- test pattern ^[a-zA-Z]+$ -->
            <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
                  The State can only contain two capital letters. EX: "PA"
            </span>
        </div>
            <div class="form-group">
                  <label>Zip Code</label>
                  <input type="text"
                        class="form-control"
                        name="ZipCode"
                        [(ngModel)]="member.ZipCode"
                        #memberModel="ngModel"
                        pattern="">
                        <!-- test pattern -->
                  <span class="help-block danger" *ngIf="memberModel.errors?.pattern && memberModel.touched">
                        The Zip Code must have 5 digits.
                  </span>
            </div> 
     <button
         class="btn btn-primary btn-sm"
         [disabled]="f.invalid">Add
     </button>
   </form>
 </div>
 
 
<button mat-button color='primary'>Export</button>

<div *ngIf="error" class="alert alert-danger">{{error}}</div>
<div *ngIf="success" class="alert alert-success">{{success}}</div>

<br><br><br><br>
